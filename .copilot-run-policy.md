# Assistant Terminal Run Policy (.copilot-run-policy.md)

Purpose
--------
This file documents the repository-level policy that assistants (Copilot-style) should read and follow before executing terminal commands in this workspace. It is intended to be human-readable and machine-parseable.

Policy rules
------------
1. Consent requirement: An assistant MUST NOT run any terminal command in this repository unless a consent token file exists at the repository root named `.assistant-consent` and contains the single line `allow-terminal: true`.

2. Explicit request only: An assistant should only run terminal commands after the user explicitly asks it to do so in the current session and confirms the operation.

3. Readme check: An assistant should display the `specify-playground/README.md` `Allowing the assistant to run terminal commands` section to the user before running commands.

4. No destructive defaults: An assistant must never run commands which delete or modify large swathes of the repo (for example `rm -rf /` or `git reset --hard`), or that modify remote state (for example `git push`) without explicit, separate confirmation.

5. Logging: When an assistant runs commands it should record the commands it executed and the outputs in `.assistant-run-logs/` with time-stamped filenames.

6. Failure handling: If a command fails or is cancelled, the assistant should stop executing further commands and report the failure to the user with the captured logs.

7. Escalation: If the requested operation requires elevated privileges (sudo) or network secrets, the assistant must refuse and ask the user to run the command locally.

Machine-parsing hints
---------------------
- The presence of a file named `.assistant-consent` with the exact content `allow-terminal: true\n` is the canonical consent mechanism.
- The assistant may also check for `.assistant-consent.example` to guide the user if a consent file is not present.

Change process
--------------
- This file is a repo-level policy; to change it, open a PR and have it reviewed by the repo maintainers.
